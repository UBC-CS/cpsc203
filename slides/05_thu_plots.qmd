---
date: 2026-02-05
pyodide:
  - pandas
  - matplotlib
  - datetime
---

## Announcements

* Lab 5 is this week

## Today

Asking harder questions:

* Working with multiple weeks of data
* Visualizing song trajectories
* Using `.isin()` to filter by a list

## Today's challenge...

Given a year of charts,

* what do the paths of the number ones look like?

* Do most songs debut at the top? How fast do they fall?

We can quantify these things, and analyze them, but a picture will help us see if there's anything interesting in the data.

## The key technique: `.isin()`

To track specific songs across weeks, we need to filter by a **list** of values:

```python
# Get songs that were #1 at some point
number_ones = df[df['rank'] == 1]['song'].unique()

# Filter to only those songs (across all weeks)
trajectories = df[df['song'].isin(number_ones)]
```

`.isin()` returns `True` for rows where the column value is in the list.

## Let's Write Code {.activity}

Open the Billboard (Visualization) activity, and load `STUDENT_viz_nb.py`.

[PrairieLearn Activity](https://us.prairielearn.com/pl/course_instance/193300/assessment/2594345)

## Discussion

* What patterns do you see in the #1 songs?
* Do most songs debut at the top?
* How quickly do they typically fall?
* Any songs with unusual trajectories?

## Resources

<https://pymotw.com/2/datetime/>

<https://www.dataschool.io/best-python-pandas-resources/>

<https://pandas.pydata.org/Pandas_Cheat_Sheet.pdf>

<https://queirozf.com/entries/pandas-dataframe-plot-examples-with-matplotlib-pyplot>
