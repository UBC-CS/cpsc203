---
date: 2025-11-06
---

## Announcements

# Sudoku

## Rush Hour

::::: columns
::: {.column}
![](/images/gr5.png)
:::
::: {.column}

<img src="/images/gr5rh.png" width="30%">

Graph $G = (V, E)$

* $V$:
* $E$:

Path:

:::
::::: 

## Representing Sudoku

* A *representation* of a system is a model of the system that is useful in analysis. 
* A *state space* is a collection of all possible configurations of a physical system. 
* Each configuration is described using its representation, and is called a *state*.

How would you represent the game of Sudoku?

![](/images/su1smallgrid.png)

## State Space Graphs

Define a graph where every vertex is \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_,
and edge (u,v) means \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_.

How many neighbors does this vertex have?

![](/images/su1smallgrid.png)

## TicTacToe State Space Graph

![](/images/su2tictactoe.png)

## Searching State Space Graphs

![](/images/su3many.png)

## Depth First Search

::::: {.columns}
::: {.column width=50%}
![](/images/su4ariadne.png)
:::
::: {.column width=50%}
![](/images/su5maze.png)
:::
:::::

<https://www.youtube.com/watch?v=8qrZ1clEp-Y>

## Stacks

::::: {.columns}
::: {.column width=70%}
Programmatic manifestation of a \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_.

\ 

Stack functions:

* Insert: `push(item)`
* Remove: `pop()` $\rightarrow$ `item`

Deque functions:

* Insert: `append(item)`
* Remove: `pop()` $\rightarrow$ `item`

:::
::: {.column width=30%}
![](/images/su6pez.png)
:::
:::::

## Flood Fill {.smaller}

::::: columns
::: {.column width=50%}

![](/images/FF1.png)

- enqueue the center
- while the queue is not empty:
   - v = dequeue
   - for each valid neighbor w of v:
      - process w
      - enqueue w

:::
::: {.column width=50%}
<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 800 960" width="420" height="560" role="img">
  <defs>
    <style>
      .outer { stroke:#000; stroke-width:120; fill:none; stroke-linecap:none; stroke-linejoin:round; }
      .inner { stroke:#fff; stroke-width:100; fill:none; stroke-linecap:round; stroke-linejoin:round; }
    </style>
  </defs>
  <path id="center"
        d="M 60 120
           C 240 110, 460 130, 660 170
           C 710 190, 710 300, 660 330
           C 480 430, 300 390, 160 460
           C 60 510, 60 690, 170 750
           C 330 835, 520 820, 690 880"
        class="outer"/>
  <path id="edge"
        d="M 60 120
           C 240 110, 460 130, 660 170
           C 710 190, 710 300, 660 330
           C 480 430, 300 390, 160 460
           C 60 510, 60 690, 170 750
           C 330 835, 520 820, 690 880"
        class="inner"/>
</svg>

:::
:::::

## Depth First Search {.smaller}

::::: columns
::: {.column width=50%}

<svg xmlns="http://www.w3.org/2000/svg"
     viewBox="0 0 400 220"
     width="400" height="220" role="img"
     aria-label="Graph with vertices A,B,C,D,E">
  <style>
    .node { fill:#d9f3f7; stroke:#000; stroke-width:4; }
    .edge { stroke:#000; stroke-width:4; fill:none; }
    .label { font: 18px ui-sans-serif, system-ui, -apple-system, "Segoe UI", Arial;
             text-anchor:middle; dominant-baseline:middle; }
  </style>
  <line x1="80"  y1="110" x2="200" y2="50"  class="edge"/>
  <line x1="80"  y1="110" x2="200" y2="170" class="edge"/>
  <line x1="200" y1="50"  x2="200" y2="170" class="edge"/>
  <line x1="200" y1="50"  x2="260" y2="110" class="edge"/>
  <line x1="200" y1="170" x2="260" y2="110" class="edge"/>
  <line x1="200" y1="50"  x2="340" y2="110" class="edge"/>
  <line x1="260" y1="110" x2="340" y2="110" class="edge"/>
  <line x1="200" y1="170" x2="340" y2="110" class="edge"/>
  <circle cx="200" cy="50"  r="22" class="node"/>
  <circle cx="80"  cy="110" r="22" class="node"/>
  <circle cx="200" cy="170" r="22" class="node"/>
  <circle cx="260" cy="110" r="22" class="node"/> 
  <circle cx="340" cy="110" r="22" class="node"/>
  <text x="200" y="50"  class="label">A</text>
  <text x="80"  y="110" class="label">B</text>
  <text x="200" y="170" class="label">C</text>
  <text x="260" y="110" class="label">D</text>
  <text x="340" y="110" class="label">E</text>
</svg>


- process start vertex
- `push(start_vertex)` 
- while the `stack` is not empty:
   - v = `pop()`
   - for each valid neighbor `w` of `v`:
      - process w
      - `push(w)`

:::
::: {.column width=50%}
<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 800 960" width="420" height="560" role="img">
  <defs>
    <style>
      .outer { stroke:#000; stroke-width:120; fill:none; stroke-linecap:none; stroke-linejoin:round; }
      .inner { stroke:#fff; stroke-width:100; fill:none; stroke-linecap:round; stroke-linejoin:round; }
    </style>
  </defs>
  <path id="center"
        d="M 60 120
           C 240 110, 460 130, 660 170
           C 710 190, 710 300, 660 330
           C 480 430, 300 390, 160 460
           C 60 510, 60 690, 170 750
           C 330 835, 520 820, 690 880"
        class="outer"/>
  <path id="edge"
        d="M 60 120
           C 240 110, 460 130, 660 170
           C 710 190, 710 300, 660 330
           C 480 430, 300 390, 160 460
           C 60 510, 60 690, 170 750
           C 330 835, 520 820, 690 880"
        class="inner"/>
</svg>

:::
:::::

## Algorithm Planning

Overall strategy:

* Move forward through the states (board configurations) until you canâ€™t go any farther. 
* If the board is complete, you win!
* If the board is not complete, then back up and try a new state in the most recent cell possible. 

## Searching State Space Graphs

![](/images/su3many.png)

## Moving toward implementation

Need to be able to check whether a candidate entry is *valid*.

::::: {.columns}
::: {.column}

Suppose we have a variable `grid`, representing the board, and we want to place a value called `num`, in position (x,y). 

Need to check uniqueness in:

* row
* column 
* block

:::
::: {.column}

![](/images/su7numcheck.png)

Which conditional checks a row?

Which conditional checks a column?

How shall we check a block?
:::
:::::

## Block Validity

**Python tidbit**: to query a region in a 2d numpy matrix, just define the bounds on the region and use `in`. 

In the small example below, `2 in grid[0:2,0:2]` returns `True`.

![](/images/su1smallgrid.png)

**New puzzle**: given a location (x,y) how do we define its region?


## Defining Regions 

Given location $(x,y)$, determine the region in which it lives. 

::::: {.columns}
::: {.column width=80%}
* a region `s:t` contains $x$ if $s\leq x< t$

* for a $4\times 4$ grid, the block size is 2
:::
::: {.column width=20%}
![](/images/su1smallgrid.png)
:::
:::::

![](/images/su8regions.png)

## Generalize

Find the region for point $(x,y)$ in a $r^2\times r^2$ grid. 

Hint: In python, `x//r` is the integer part of "`x` divided by `r`". 

## Another Puzzle {.smaller}

The locations in sudoku are specified by $(x,y)$. As we advance our solution, we can loop over the ranges of $x$ ($W$) and $y$ ($H$), but it would be easier if we could just iterate over the values 0 up to $W\times H$. 

Write a function `postup` that takes an integer position `p` as input, and returns an `(x,y)` position. You may assume that the height and width of the grid is stored in a variable called `states`.

::::: {.columns}
::: {.column width=30%}
![](/images/su1smallgrid.png)
:::
::: {.column width=70%}

``` {pyodide}
states = 10
def postup(p):
    pass

print(postup(23))
```
:::
:::::


## Demo {.activity}
    
[PrairieLearn Activity](https://us.prairielearn.com/pl/course_instance/193300/assessment/)

