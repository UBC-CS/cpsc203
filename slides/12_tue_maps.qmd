---
date: 2025-11-20
---

## Announcements

# Single Source Shortest Path, Fin

## Geographic Applications {data-background-image="/images/maps1data.png"}

The data we use for computation is separate from the visualization.

## Dijkstra's Algorithm {.smaller}

::::: columns
::: {.column}
1. Initialize structure:

   - For all `v`, 
      - `d[v] = INF`, 
      - `p[v] = null`

2. Initialize source: `d[s] = 0`

3. Repeat these steps `n` times:
  - Find minimum `d[]` unlabelled vertex: `v`
  - Label vertex `v`
  - For all unlabelled neighbors `w` of `v`, 
    - If (_________________ < `d[w]`)
      - `d[w] =` ______________ 
      - `p[w] = v`
:::
::: {.column}

* How is the algorithm similar to BFS/DFS?

\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_

* How is the algorithm different from BFS/DFS?

\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
:::
::::: 

## Final Demo {.activity}

[PrairieLearn Activity](https://us.prairielearn.com/pl/course_instance/193300/assessment/2615102)

What We‚Äôll See in the Demos

* Convert map data to graph

* Identify amenities (Starbucks)

* Compute shortest route between two landmarks

* Visualize everything interactively

## What have we Learned? {.smaller}

| Algorithm	| Data Structure | Costs? | Shortest? |	Frontier |
|-----------|----------|---------|--------|--------|
| DFS	| Stack	| ignored |	no	| dive deep |
| BFS	| Queue	| all equal | 	yes	| explore in layers |
| Dijkstra	| Priority Queue	| any non-neg |	yes	| explore by shortest known distance

## Resources

* REALLY great example: <https://www.youtube.com/watch?v=wsSEKm-rU6U>

* OSMNX reference: <https://github.com/gboeing/osmnx-examples>

* Tutorial: <https://gist.github.com/psychemedia/b49c49da365666ba9199d2e27d002d07> 

* Tags: <https://wiki.openstreetmap.org/wiki/Map_features>

# Travelling Salesperson Problem (TSP)

## Maps: Running Errands

Determine the least cost route through a set of given locations, returning to the start.

::::: columns
::: {.column}
![](/images/maps9van.png)
:::
::: {.column}
![](/images/maps9dots.png)
:::
:::::

## Travelling Salesperson Problem (TSP)

"Given a list of cities, and the distances between each pair of cities, what is the shortest possible route that visits each city exactly once and returns to the origin city?" 

* Classic problem on graphs

* First known mention was in 1930

* \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_

## How many routes?

Suppose you have 6 locations. How many different candidate solutions are there? Generalize to k locations?

::::: columns
::: {.column}
![](/images/maps9dots.png)
:::
::: {.column}
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_

\ 

\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_

\ 

\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_

\ 

\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_

\ 

\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_

:::
:::::

## Demo Blog

<https://medium.com/data-science/around-the-world-in-90-414-kilometers-ce84c03b8552>

![](/images/maps9caps.png)

## Plan for Code {data-background-image="/images/maps9chart.png"}

Steps to assemble our solution:

\ 

1. \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_

2. \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_

3. \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_

4. \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_

5. \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_

::: notes
1. assemble the graph and errands
2. create pairwise distances
3. create all possible permutations of paths
4. find minimum route and assemble turn-by-turn for that route
5. visualize on map
:::

## A Technical Detail

![](/images/maps9home.png)

## Demo {.activity}

[PrairieLearn Activity](https://us.prairielearn.com/pl/course_instance/193300/assessment/2616092)

## What Does `lambda` Do? {.smaller}

``` python
dferrands['latlong'] = dferrands.apply(
                lambda row: ox.geocode(row['errand']),
                axis=1
              )
```

**Goal:** Create a new column (`latlong`) and fill it with coordinates for each errand in the dataframe.

**How it works:**

* `df.apply(..., axis=1)`:  Run a function once for each row.

* `lambda row: ox.geocode(row['errand'])`: A tiny inline function. Read it as:
"Given a row, look up the place name in `row['errand']`,geocode it, and return the (lat, lon)."

* The returned value becomes the entry in the new latlong column.

**Why lambda?** We only need this function once, so we write it right where it‚Äôs used.

## Tour Distance

We assemble each candidate solution as an arrangement of all of the errands:

Ex: `A D B E F C`

How do we find the total distance if we do the errands in the suggested order?

## Why This Matters {.smaller}

There are *lots* of applications:

- üì¶ **UPS/FedEx/Amazon Delivery** Millions saved by reducing even 1km per driver per day.
- üçî **UberEats/DoorDash/Skip** Multi-stop pickup/delivery with time windows.
- üß¨ **DNA Sequencing & Genome Assembly** Ordering fragments relies on TSP-like reconstruction.
- üöå **School Bus Routing** Minimize buses, fuel, and time while meeting constraints.
- üß™ **Medical Lab Sample Pipelines** Robotic arms schedule efficient multi-station workflows.
- ‚ùÑÔ∏è **Snowplow & Garbage Truck Routing** Efficiently cover every street in a city.
- üè≠ **Factory Robots & CNC Machines** Optimizing tool paths reduces waste, heat, and wear.
- ‚úàÔ∏è **Airline Crew Scheduling** Complex daily routing: crews must return to base, meet rest rules.
- üåç **City Infrastructure Planning** Utility inspections, meter reading, streetlight repair routes.
- üöë **Ambulance & Emergency Routing** Minimize response times; life-critical optimization.





